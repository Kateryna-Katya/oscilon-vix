{"version":3,"file":"main-DfWiU4Hl.js","sources":["../../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\n  // 1. Инициализация иконок\n  if (typeof lucide !== 'undefined') lucide.createIcons();\n\n  // 2. Плавный скролл\n  if (typeof Lenis !== 'undefined') {\n      const lenis = new Lenis({ duration: 1.2, smooth: true });\n      function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }\n      requestAnimationFrame(raf);\n  }\n\n  // 3. Мобильное меню (код из предыдущего этапа)\n  initMobileMenu();\n\n  // 4. ЗАПУСК HERO АНИМАЦИИ\n  initHeroCanvas();\n\n  console.log('Oscilon-Vix: Systems Operational.');\n});\n\n/* =========================================\n ФУНКЦИИ\n ========================================= */\n\nfunction initMobileMenu() {\n  const burger = document.querySelector('.header__burger');\n  const closeBtn = document.querySelector('.mobile-menu__close');\n  const mobileMenu = document.querySelector('.mobile-menu');\n  const menuLinks = document.querySelectorAll('.mobile-menu__link, .mobile-menu__btn');\n\n  if (burger && mobileMenu) {\n      function toggleMenu() {\n          mobileMenu.classList.toggle('is-open');\n          document.body.style.overflow = mobileMenu.classList.contains('is-open') ? 'hidden' : '';\n      }\n      burger.addEventListener('click', toggleMenu);\n      if (closeBtn) closeBtn.addEventListener('click', toggleMenu);\n      menuLinks.forEach(link => link.addEventListener('click', toggleMenu));\n  }\n}\n\n/* =========================================\n HERO CANVAS ANIMATION (Интерактивный градиент)\n ========================================= */\nfunction initHeroCanvas() {\n  const canvas = document.getElementById('hero-canvas');\n  if (!canvas) return;\n\n  const ctx = canvas.getContext('2d');\n  let width, height;\n  let mouseX = window.innerWidth / 2;\n  let mouseY = window.innerHeight / 2;\n\n  // Цвета палитры\n  const colors = [\n      {r: 255, g: 0, b: 127}, // Hot Magenta\n      {r: 157, g: 0, b: 255}, // Electric Purple\n      {r: 5, g: 5, b: 5}      // Deep Void (Background)\n  ];\n\n  // Частицы-\"блобы\"\n  let blobs = [];\n\n  class Blob {\n      constructor() {\n          this.init();\n      }\n      init() {\n          this.x = Math.random() * width;\n          this.y = Math.random() * height;\n          this.vx = (Math.random() - 0.5) * 0.5; // Очень медленная скорость\n          this.vy = (Math.random() - 0.5) * 0.5;\n          this.radius = Math.random() * 300 + 200; // Большие радиусы\n          this.colorIndex = Math.floor(Math.random() * (colors.length - 1));\n          this.alpha = Math.random() * 0.5 + 0.2;\n          this.t = Math.random() * Math.PI * 2;\n      }\n      update() {\n          this.t += 0.005;\n          // Броуновское движение + синус для плавности\n          this.x += this.vx + Math.sin(this.t) * 0.5;\n          this.y += this.vy + Math.cos(this.t) * 0.5;\n\n          // Реакция на мышь (плавное отталкивание)\n          const dx = mouseX - this.x;\n          const dy = mouseY - this.y;\n          const dist = Math.sqrt(dx * dx + dy * dy);\n          if (dist < 400) {\n              const force = (400 - dist) / 400;\n              this.vx -= dx * force * 0.001;\n              this.vy -= dy * force * 0.001;\n          }\n\n          // Границы холста (отскакивание)\n          if (this.x < -this.radius) this.x = width + this.radius;\n          if (this.x > width + this.radius) this.x = -this.radius;\n          if (this.y < -this.radius) this.y = height + this.radius;\n          if (this.y > height + this.radius) this.y = -this.radius;\n      }\n      draw(ctx) {\n          // Рисуем радиальный градиент для каждого \"блоба\"\n          const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius);\n          const c = colors[this.colorIndex];\n          gradient.addColorStop(0, `rgba(${c.r}, ${c.g}, ${c.b}, ${this.alpha})`);\n          gradient.addColorStop(1, `rgba(5, 5, 5, 0)`); // Растворяется в фоне\n\n          ctx.globalCompositeOperation = 'lighter'; // Эффект свечения при наложении\n          ctx.fillStyle = gradient;\n          ctx.beginPath();\n          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.globalCompositeOperation = 'source-over';\n      }\n  }\n\n  function resize() {\n      width = canvas.width = window.innerWidth;\n      height = canvas.height = window.innerHeight;\n      // Пересоздаем блобы при ресайзе\n      blobs = [];\n      for(let i = 0; i < 5; i++) { // 5 больших светящихся областей\n          blobs.push(new Blob());\n      }\n  }\n\n  function animate() {\n      ctx.clearRect(0, 0, width, height);\n      // Заливаем фон базовым цветом\n      ctx.fillStyle = 'rgba(5, 5, 5, 1)';\n      ctx.fillRect(0, 0, width, height);\n\n      blobs.forEach(blob => {\n          blob.update();\n          blob.draw(ctx);\n      });\n      requestAnimationFrame(animate);\n  }\n\n  window.addEventListener('resize', resize);\n  window.addEventListener('mousemove', (e) => {\n      // Плавное следование за мышью\n      mouseX += (e.clientX - mouseX) * 0.1;\n      mouseY += (e.clientY - mouseY) * 0.1;\n  });\n\n  resize();\n  animate();\n}\n// 5. Инициализация остальных секций\ninitStats();\ninitAccordion();\ninitForm();\ninitCookies();\n\n/* --- НИЖЕ ВСТАВИТЬ САМИ ФУНКЦИИ (ВНЕ addEventListener) --- */\n\nfunction initStats() {\nconst stats = document.querySelectorAll('.stat-num');\nconst observer = new IntersectionObserver((entries) => {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            const target = +entry.target.getAttribute('data-target');\n            const duration = 2000;\n            const start = performance.now();\n\n            const step = (currentTime) => {\n                const progress = Math.min((currentTime - start) / duration, 1);\n                // Easing func\n                const ease = 1 - Math.pow(1 - progress, 3);\n                entry.target.innerText = Math.floor(ease * target);\n                if (progress < 1) requestAnimationFrame(step);\n                else entry.target.innerText = target;\n            };\n            requestAnimationFrame(step);\n            observer.unobserve(entry.target);\n        }\n    });\n});\nstats.forEach(s => observer.observe(s));\n}\n\nfunction initAccordion() {\nconst headers = document.querySelectorAll('.accordion-header');\nheaders.forEach(header => {\n    header.addEventListener('click', () => {\n        const isActive = header.classList.contains('active');\n\n        // Close all\n        headers.forEach(h => {\n            h.classList.remove('active');\n            h.nextElementSibling.style.maxHeight = null;\n        });\n\n        // Open clicked\n        if (!isActive) {\n            header.classList.add('active');\n            header.nextElementSibling.style.maxHeight = header.nextElementSibling.scrollHeight + \"px\";\n        }\n    });\n});\n}\n\nfunction initForm() {\nconst form = document.getElementById('lead-form');\nconst msg = document.getElementById('form-message');\nif(!form) return;\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n    const captcha = document.getElementById('captcha').value;\n\n    if(parseInt(captcha) !== 9) {\n        msg.textContent = 'Ошибка: Неверный ответ (5 + 4 = 9)';\n        msg.className = 'form-msg error';\n        return;\n    }\n\n    const btn = form.querySelector('button');\n    const oldText = btn.textContent;\n    btn.textContent = 'Отправка...';\n    btn.disabled = true;\n\n    setTimeout(() => {\n        msg.textContent = 'Заявка принята! Мы свяжемся с вами.';\n        msg.className = 'form-msg success';\n        form.reset();\n        btn.textContent = oldText;\n        btn.disabled = false;\n    }, 1500);\n});\n}\n\nfunction initCookies() {\nconst popup = document.getElementById('cookie-popup');\nconst btn = document.getElementById('accept-cookies');\nif(!popup) return;\n\nif(!localStorage.getItem('oscilon_cookies')) {\n    setTimeout(() => popup.classList.add('show'), 2000);\n}\n\nbtn.addEventListener('click', () => {\n    localStorage.setItem('oscilon_cookies', 'true');\n    popup.classList.remove('show');\n});\n}"],"names":["raf","time","lenis","initMobileMenu","initHeroCanvas","burger","closeBtn","mobileMenu","menuLinks","toggleMenu","link","canvas","ctx","width","height","mouseX","mouseY","colors","blobs","Blob","dx","dy","dist","force","gradient","c","resize","i","animate","blob","e","initStats","initAccordion","initForm","initCookies","stats","observer","entries","entry","target","duration","start","step","currentTime","progress","ease","s","headers","header","isActive","h","form","msg","captcha","btn","oldText","popup"],"mappings":"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"}